# AI-PDFSearcher

Моё веб-приложение на **Flask** использует различные модели машинного обучения для анализа текста в **PDF-документах**. Оно поддерживает функционал извлечения текста как напрямую из **PDF**, так и из изображений внутри них, ответы на вопросы, основанные на тексте, и создание резюме текста.

## Основные функции и рабочий процесс:

### Извлечение текста из PDF и изображений:

Для извлечения текста я использую довольн известную библиотеку которая позволяет распознавать и “читать” текст, встроенный в изображения. **Python-tesseract** - это инструмент оптического распознавания символов (OCR) для python.
Тут я написал функцию которая должна отделять текст от фотографии с помощью **Tesseract**, также добавив расширения в плане языков, теперь библиотека может читать русский также как и английский:

```
import pytesseract

def extract_text_from_image(image_path):
    try:
        image = Image.open(image_path)
        text = pytesseract.image_to_string(image, lang='rus+eng')
        print(f"Extracted text from image: {text[:200]}...")
        return text
    except Exception as e:
        print(f"Failed to extract text from image: {e}")
        return None

```

В дальнейшем был написан кусок кода который позволяет работать функции сверху, а именно была использована библиотека Fitz/PyMuPDF для просмотра, рендеринга и инструментов для работы с такими форматами как PDF, XPS, OpenXPS, CBZ, EPUB и FB2.

```
    pdf_document = fitz.open(temp_pdf_path)
    for page_num in range(len(pdf_document)):
        page = pdf_document.load_page(page_num)
        images = page.get_images(full=True)
        for img_index, img in enumerate(images):
            xref = img[0]
            base_image = pdf_document.extract_image(xref)
            image_bytes = base_image["image"]
            image_ext = base_image["ext"]
            image_path = os.path.join(temp_dir, f"image{page_num+1}_{img_index+1}.{image_ext}")
            with open(image_path, "wb") as image_file:
                image_file.write(image_bytes)

            text = extract_text_from_image(image_path)
            if text:
                combined_text += " " + text
```

### Анализ текста с предварительно обученными моделями:

qa_model: Модель для ответа на вопросы, которая может предоставлять ответы на вопросы, основанные на контексте, предоставленном из текста PDF.
summarizer: Модель, которая генерирует резюме предоставленного текста.
nlp: Используется для извлечения признаков для вычисления сходства текстов и поиска релевантных фрагментов в ответ на запрос пользователя.

### Веб-интерфейс:

Позволяет пользователям загружать PDF-файлы и отправлять запросы о их содержимом.
Бэкенд обрабатывает эти входные данные, обрабатывает PDF и возвращает ответ в формате JSON на основе запроса.

### Определения конечных точек:

@app.route('/analyze', methods=['POST']): Обрабатывает загрузку PDF-файла и запрос, обрабатывает PDF с использованием вышеупомянутых методов и возвращает JSON-ответ с результатами запроса.

## Потенциальные проблемы и рекомендации:

### Обработка ошибок:

Приложение пытается управлять исключениями во время извлечения текста, но также должно обрабатывать потенциальные ошибки в прогнозах модели (ответы на вопросы и резюмирование) и других частях процесса обработки PDF.

### Оптимизация производительности:

Обработка PDF, особенно извлечение текста в виде изображений, может потреблять много ресурсов. Исследую возможности оптимизации этих процессов или настройку системы очередей для эффективного управления нагрузкой.

### Вопросы безопасности:

Особое внимание уделяю безопасной обработке файлов, чтобы предотвратить обработку вредоносных файлов и проверяю файлы на соответствие легитимным PDF, санитизируя все входные данные.

### Пользовательский интерфейс:

Фронтенд предоставляет базовые функциональные возможности, но его можно улучшить для удобства использования, например, отображая индикатор прогресса во время обработки и предоставляя более подробную обратную связь о состоянии запроса.

### Масштабируемость:

Поскольку приложение зависит от интенсивных задач обработки, масштабирование может потребовать распределенной обработки или использования более мощных серверов, особенно при ожидании высокой нагрузки.
Этот анализ очерчивает основные функциональные возможности и потенциальные области улучшения вашего приложения. Если вам нужны более конкретные детали по любому конкретному аспекту, пожалуйста, дайте знать!

### Мой опыт работы над проектом 

При написании своего веб-приложения на Flask я столкнулся с необходимостью использования множества различных технологий, начиная от фреймворков и библиотек для обработки PDF и изображений до векторных баз данных и систем управления базами данных. Этот проект позволил мне глубоко погрузиться в мир векторных баз данных, таких как Malvius, и традиционных систем управления базами данных, включая PostgreSQL и SQLite.

Особенно сложной задачей стало настройка локального сервера для баз данных. Мне нужно было убедиться, что сервер стабильно работает и способен обрабатывать запросы в режиме реального времени, особенно когда речь идет о выгрузке и обработке больших PDF-файлов. Я разработал систему, которая конвертирует PDF-страницы в изображения, затем из этих изображений извлекает текст с помощью OCR (оптическое распознавание символов) и загружает его в базу данных. В некоторых случаях текст извлекался напрямую из PDF и также отправлялся в базу данных.

Работа с различными форматами данных и интеграция их в единую систему была настоящим вызовом. Каждый этап процесса, от конвертации PDF до извлечения текста и его сохранения в базу данных, требовал тщательной настройки и оптимизации. Я многократно сталкивался с проблемами производительности и сбоями, которые требовали тщательного анализа и исправления. Оптимизация запросов к базе данных и управление памятью сервера стали ключевыми аспектами для обеспечения эффективности и надежности приложения.

Этот опыт позволил мне значительно улучшить мои навыки в области разработки веб-приложений и работы с базами данных, дав глубокое понимание взаимодействия различных технологий и подходов в современной разработке программного обеспечения.






